<!DOCTYPE html>
<html lang="en">
<head>
    <title>Telapong S.A.</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css">
    <script type="text/javascript" src="bower_components/jquery/dist/jquery.js"></script>
    <script type="text/javascript" src="clientes.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {

            var siguiente_cliente = 0;

            $("a#boton-buscar").click(function () {

                $(this).text("Buscando clientes").addClass("disabled");

                var i;
                for (i = 0; i < 10; i++) {

                    if (i + siguiente_cliente >= clientes.length) {
                        break;
                    }

                    var a = clientes[i + siguiente_cliente];

                    /* uso prepend() en vez de append() para insertar los elementos
                       arriba de todo en la tabla en vez de al final */
                    $("table#tabla-clientes>tbody").prepend(
                            $("<tr>").append(
                                    $("<td>").append(
                                            /* a partir de la imagen txt=20, el texto es muy largo para un tama침o de imagen tan chico.
                                             modifico la url aca para no modificar clientes.js */
                                            $("<img>").attr("src", a.logo.replace("w=32", "w=36").replace("h=32", "h=36"))
                                    ).addClass("text-center"),
                                    $("<td>").text(a.id).addClass("text-center"),
                                    $("<td>").text(a.razonSocial).addClass("text-center"),
                                    $("<td>").text(a.direccion.calle + " " + a.direccion.altura + ", " + a.direccion.ciudad),
                                    $("<td>").text(a.presidente.nombre + " " + a.presidente.apellido),
                                    $("<td>").text("$ " + (a.activo - a.pasivo).toFixed(2)).addClass((a.activo - a.pasivo < 0) ? "bg-danger" : "bg-success").addClass("text-right"),
                                    $("<td>").text(a.fechaCreacion)
                            /* uso children() para buscar todos los td's recien creados y les agrego una clase */
                            /* tengo que usar parent() al final porque si no, devuelve el td en vez del tr
                               y necesito agregar el tr al tbody */
                            ).children("td").addClass("vcenter").parent()
                    );
                }

                siguiente_cliente = siguiente_cliente + i;

                if (siguiente_cliente < clientes.length) {
                    $(this).text("Buscar 10 clientes m치s").removeClass("disabled");
                } else {
                    $(this).text("No hay mas clientes");
                }
            });
        });
    </script>
    <style>
        /* si se deja solo vcenter, entonces no funciona porque lo sobreescribe bootstrap */
        .table .vcenter {
            vertical-align: middle;
        }
        #boton-buscar {
            /* padding agranda el boton en si y no el espacio que hay debajo */
            margin-bottom: 25px;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-xs-12">
            <div class="jumbotron text-center">
                <h1>Telapong S.A.</h1>
                <p>Listado de clientes oficiales</p>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12">
            <a href="#" class="btn btn-primary" id="boton-buscar">Buscar 10 clientes</a>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12">
            <table class="table table-bordered table-striped table-hover" id="tabla-clientes">
                <thead class="text-center">
                <tr>
                    <td></td>
                    <td class="vcenter"><strong>ID</strong></td>
                    <td class="vcenter"><strong>Raz칩n social</strong></td>
                    <td class="vcenter"><strong>Direcci칩n</strong></td>
                    <td class="vcenter"><strong>Presidente</strong></td>
                    <td class="vcenter"><strong>Patrimonio neto</strong></td>
                    <td class="vcenter"><strong>Inicio de actividad</strong></td>
                </tr>
                </thead>
                <tbody>

                </tbody>
            </table>
        </div>
    </div>
</div>
</body>
</html>
